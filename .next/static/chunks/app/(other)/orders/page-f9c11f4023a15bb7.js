(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[307],{8166:function(e,t,r){Promise.resolve().then(r.bind(r,737))},7977:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var s=r(2265);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,s.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:l,...c},u)=>(0,s.createElement)("svg",{ref:u,...d,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:o("lucide",n),...c},[...l.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(i)?i:[i]])),i=(e,t)=>{let r=(0,s.forwardRef)(({className:r,...d},i)=>(0,s.createElement)(n,{ref:i,iconNode:t,className:o(`lucide-${a(e)}`,r),...d}));return r.displayName=`${e}`,r}},737:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var s=r(7437),a=r(2265),o=r(2743),d=e=>{let{selectedOrder:t}=e,r=t?Object.keys(t.cart.products).reduce((e,r)=>e+t.cart.products[r].product.price*t.cart.products[r].quantity,0):0,a=(null==t?void 0:t.cart.gst)||0,o=(null==t?void 0:t.cart.deliveryCharges)||0,d=(null==t?void 0:t.cart.payablePrice)||0;return(0,s.jsx)("div",{children:t?(0,s.jsxs)("div",{className:"max-w-4xl mx-auto bg-white shadow-lg rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-brown text-white p-6 text-center",children:(0,s.jsx)("h2",{className:"text-3xl font-bold",children:"Order Summary"})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 p-6",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 shadow-md",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-brown mb-4",children:"Order Information"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Order ID:"})," ",t.orderId]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",(0,s.jsx)("span",{className:"px-2 py-1 capitalize rounded text-white text-sm ".concat("Completed"===t.status?"text-green-500":"pending"===t.status?"text-orange-500":"confirmed"===t.status?"text-blue-500":"text-green-500"),children:"pending"===t.status?"Order Placed":"confirmed"===t.status?"Ready to Dispatch":t.status})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 shadow-md",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-brown mb-4",children:"Shipping Address"}),(0,s.jsx)("p",{children:t.address.street}),(0,s.jsxs)("p",{children:[t.address.city,", ",t.address.state]}),(0,s.jsxs)("p",{children:[t.address.country," -"," ",t.address.pinCode]})]})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-brown mb-4",children:"Products in Your Order"}),(0,s.jsx)("div",{className:"space-y-4",children:Object.keys(t.cart.products).map(e=>{let r=t.cart.products[e].product,a=t.cart.products[e].quantity,o=t.cart.products[e].product.price;return(0,s.jsxs)("div",{className:"flex justify-between items-center bg-gray-100 rounded-md p-4 shadow-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-4",children:(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-lg font-medium text-gray-700",children:r.productName})})}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-md font-semibold text-gray-700",children:["₹",o," x ",a," = ₹",o*a]})})]},e)})})]}),(0,s.jsxs)("div",{className:"bg-gray-100 p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-brown mb-4",children:"Price Breakdown"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("div",{children:"Subtotal:"}),(0,s.jsxs)("div",{className:"text-right",children:["₹ ",r.toFixed(2)]}),(0,s.jsx)("div",{children:"GST:"}),(0,s.jsxs)("div",{className:"text-right",children:["₹ ",a.toFixed(2)]}),(0,s.jsx)("div",{children:"Delivery Charges:"}),(0,s.jsxs)("div",{className:"text-right",children:["₹ ",o]}),(0,s.jsx)("hr",{className:"col-span-2 my-2"}),(0,s.jsx)("div",{className:"font-semibold",children:"Total Payable Price:"}),(0,s.jsxs)("div",{className:"text-right font-semibold text-lg",children:["₹ ",d.toFixed(2)]})]})]})]}):(0,s.jsx)("div",{className:"text-center bg-gray-100 shadow-lg rounded-lg p-6",children:(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"No order selected."})})})},n=r(575),i=r(7977);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,i.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),c=(0,i.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var u=e=>{let{order:t}=e,[r,o]=(0,a.useState)(null),[i,u]=(0,a.useState)(1),m=Math.ceil(t.length/4),h=4*i,x=t.slice().reverse().slice(h-4,h),p=e=>{(null==r?void 0:r.orderId)===e.orderId?o(null):o(e)},g=e=>{u(e)};return(0,a.useEffect)(()=>{let e=()=>{window.innerWidth<768?o(null):o(t.slice().reverse()[0])};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[t]),(0,s.jsxs)("div",{className:"w-full overflow-y-auto p-2 bg-gray-100 flex flex-col md:flex-row",children:[(0,s.jsx)("div",{className:"w-full md:w-3/4 mb-6 md:mb-0",children:(0,s.jsxs)("div",{className:"bg-white shadow-lg rounded-lg md:p-4 p-2",children:[x.map(e=>(0,s.jsxs)("div",{className:"bg-white shadow-md rounded-lg p-4 mb-6 flex flex-col md:flex-row items-center justify-between border ".concat((null==r?void 0:r.orderId)===e.orderId?"border-brown bg-brown":"border-gray-300"),onClick:()=>p(e),children:[(0,s.jsx)("div",{className:"flex items-center justify-center",children:e.cart.products&&Object.values(e.cart.products).length>0&&(0,s.jsx)("img",{src:Object.values(e.cart.products)[0].product.images[0],alt:"Product",className:"h-24 w-24 object-cover rounded-md"})}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-around w-full",children:[(0,s.jsxs)("div",{className:"text-center md:text-left px-2",children:[(0,s.jsx)("div",{className:"font-semibold text-lg",children:"Order ID"}),(0,s.jsx)("div",{className:"text-sm",children:e.orderId})]}),(0,s.jsxs)("div",{className:"text-center md:text-left px-2",children:[(0,s.jsx)("div",{className:"font-semibold text-lg",children:"Status"}),(0,s.jsx)("div",{className:"text-sm ".concat("Completed"===e.status?"text-green-500":"pending"===e.status?"text-orange-500":"confirmed"===e.status?"text-blue-500":"text-green-500"),children:"pending"===e.status?"Order Placed":"confirmed"===e.status?"Ready to Dispatch":e.status})]}),(0,s.jsxs)("div",{className:"text-center md:text-left px-2",children:[(0,s.jsx)("div",{className:"font-semibold text-lg",children:"Price"}),(0,s.jsxs)("div",{className:"text-sm",children:["₹ ",e.cart.payablePrice.toFixed(2)]})]}),(0,s.jsx)("div",{onClick:t=>{t.stopPropagation(),p(e)},className:"text-brown hover:text-brown ",children:(null==r?void 0:r.orderId)===e.orderId?(0,s.jsx)(c,{}):(0,s.jsx)(l,{})})]}),(0,s.jsx)("div",{className:"block md:hidden mt-4",children:(null==r?void 0:r.orderId)===e.orderId&&(0,s.jsx)(d,{selectedOrder:r})})]},e.orderId)),m>1&&(0,s.jsx)("nav",{className:"flex space-x-2 justify-center mb-5",children:(0,s.jsxs)("div",{className:"flex overflow-x-auto no-scrollbar gap-2 px-2",children:[(0,s.jsx)(n.z,{onClick:()=>g(i-1),disabled:1===i,className:"text-brown hover:text-white bg-pale px-3 py-1",children:"<"}),(0,s.jsx)(n.z,{onClick:()=>g(1),className:"text-brown hover:text-white ".concat(1===i?"bg-lbrown text-white":"bg-pale"," px-3 py-1"),children:"1"}),i>3&&m>4&&(0,s.jsx)("span",{className:"text-gray-500",children:"..."}),i>2&&(0,s.jsx)(n.z,{onClick:()=>g(i-1),className:"text-brown hover:text-white bg-pale px-3 py-1",children:i-1}),1!==i&&i!==m&&(0,s.jsx)(n.z,{className:"bg-lbrown text-white px-3 py-1",onClick:()=>g(i),children:i}),i<m-1&&(0,s.jsx)(n.z,{onClick:()=>g(i+1),className:"text-brown hover:text-white bg-pale px-3 py-1",children:i+1}),i<m-2&&m>4&&(0,s.jsx)("span",{className:"text-gray-500",children:"..."}),(0,s.jsx)(n.z,{onClick:()=>g(m),className:"text-brown hover:text-white ".concat(i===m?"bg-lbrown text-white":"bg-pale"," px-3 py-1"),children:m}),(0,s.jsx)(n.z,{onClick:()=>g(i+1),disabled:i===m,className:"text-brown hover:text-white bg-pale px-3 py-1",children:">"})]})})]})}),(0,s.jsx)("div",{className:"hidden md:block w-full md:w-2/4",children:(0,s.jsx)(d,{selectedOrder:r})})]})},m=()=>{let[e,t]=(0,a.useState)([]),r=(0,o.ir)(null);return(0,a.useEffect)(()=>{if(r.data){let e=[];r.data.data.map(t=>{e.push({orderId:t.orderId,cart:t.cart,paymentId:t.paymentId,status:t.status,address:t.shippingAddress})}),t(e)}},[r.data]),r.isSuccess&&(console.log("res",r.data),console.log("page",e)),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-center w-full h-12 text-3xl font-bold",children:"Orders"}),(0,s.jsxs)("div",{className:"flex lg:flex-row flex-col items-center justify-center",children:[(0,s.jsx)(u,{order:e})," "]})]})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var s=r(7437),a=r(2265),o=r(15),d=r(7742),n=r(2169);let i=(0,d.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:d,asChild:l=!1,...c}=e,u=l?o.g7:"button";return(0,s.jsx)(u,{className:(0,n.cn)(i({variant:a,size:d,className:r})),ref:t,...c})});l.displayName="Button"},7147:function(e,t,r){"use strict";r.d(t,{Am:function(){return u},pm:function(){return m}});var s=r(2265);let a=0,o=new Map,d=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},n=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?d(r):e.toasts.forEach(e=>{d(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],l={toasts:[]};function c(e){l=n(l,e),i.forEach(e=>{e(l)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function m(){let[e,t]=s.useState(l);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},2169:function(e,t,r){"use strict";r.d(t,{cn:function(){return o}});var s=r(3167),a=r(1367);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,s.W)(t))}},2743:function(e,t,r){"use strict";r.d(t,{BG:function(){return i},PO:function(){return l},QH:function(){return h},Us:function(){return x},ir:function(){return y},kD:function(){return m},uZ:function(){return g}});var s=r(3741),a=r(7230),o=r(1286),d=r(895),n=r(7147);let i=(0,s.LC)({reducerPath:"userapi",tagTypes:["User"],baseQuery:(0,a.ni)({baseUrl:"http://localhost:5002",credentials:"include"}),endpoints:e=>({getUser:e.query({query:()=>({url:"/user/profile",method:"GET",headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:s}=t;try{let e=(await s).data.data;e&&(r((0,o.oJ)(!0)),r((0,o.YO)({email:e.email,name:e.name,password:"",address:e.address,profilePhoto:e.profilePhoto,role:e.role}))),await s,await r(i.endpoints.getCart.initiate(null))}catch(e){null==e||e.error.status}}}),getCart:e.query({query:()=>({url:"/cart/myCart",method:"GET",headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:s}=t;try{r((0,d.RV)((await s).data.data))}catch(e){if((null==e?void 0:e.error.status)===401){var a;let t=(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.message)||"Please log in first";(0,n.Am)({title:t,variant:"destructive",duration:2e3})}}}}),getOrder:e.query({query:()=>({url:"/order/myOrders",method:"GET",headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:s}=t;try{await s}catch(e){(null==e?void 0:e.error.status)===401&&(0,n.Am)({title:"Please log in first",variant:"default",duration:2e3})}}}),updateProfile:e.mutation({query:e=>({url:"/user/profile",method:"PATCH",body:e,headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:s}=t;try{await s,await r(i.endpoints.getUser.initiate(null))}catch(e){throw(null==e?void 0:e.error.status)===401&&(0,n.Am)({title:"Please log in first",variant:"destructive",duration:2e3}),Error((null==e?void 0:e.error.message)?null==e?void 0:e.error.message:"Error occurred updating user info.")}}}),logoutUser:e.query({query:()=>({url:"/user/logout",headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})}),createOrder:e.mutation({query:e=>({url:"/order/createOrder",method:"POST",body:e,headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})}),acceptPayment:e.mutation({query:e=>({method:"POST",url:"/order/acceptPayment",body:e,headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})}),verifyPayment:e.mutation({query:e=>({method:"POST",url:"/order/verifyPayment",body:e,headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}})}),userImageupdate:e.query({query:e=>{let t=new FormData;return t.append("profilePhoto",e),{url:"/user/profile/img",method:"PATCH",body:t,headers:{authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}},async onQueryStarted(e,t){let{dispatch:r,queryFulfilled:s}=t;try{let e=(await s).data.data;r((0,o.oJ)(!0)),r((0,o.YO)({email:e.email,name:e.name,password:"",address:e.address,profilePhoto:e.profilePhoto,role:e.role}))}catch(e){(null==e?void 0:e.error.status)===401&&(0,n.Am)({title:"Please log in first",variant:"destructive",duration:2e3}),console.log(e)}}})})}),{useLazyGetUserQuery:l,useUpdateProfileMutation:c,useLogoutUserQuery:u,useCreateOrderMutation:m,useAcceptPaymentMutation:h,useVerifyPaymentMutation:x,useLazyUserImageupdateQuery:p,useGetCartQuery:g,useGetOrderQuery:y}=i},1286:function(e,t,r){"use strict";r.d(t,{YO:function(){return o},dX:function(){return d},oJ:function(){return a}});let s=(0,r(6608).oM)({name:"auth",initialState:{authState:!1,user:{name:"",email:"",password:"",address:[],profilePhoto:"",role:"user"}},reducers:{setAuthState:(e,t)=>{e.authState=t.payload},setAuthUser:(e,t)=>{e.user.email=t.payload.email,e.user.name=t.payload.name,e.user.address=t.payload.address,e.user.profilePhoto=t.payload.profilePhoto,e.user.address=t.payload.address,e.user.role=t.payload.role}}}),{setAuthState:a,setAuthUser:o}=s.actions,d=s.reducer},895:function(e,t,r){"use strict";r.d(t,{RV:function(){return d}});let s=(0,r(6608).oM)({name:"Cart",initialState:{products:{},deliveryCharges:0,gst:0,totalQuantity:0,totalPrice:0,payablePrice:0,address:[]},reducers:{addToCart(e,t){let{product:r,variant:s}=t.payload,a="".concat(r.pid).concat(s.color).replace(/\./g,"_");a in e.products?e.products[a].quantity++:e.products[a]={product:r,quantity:1,variant:s},e.totalQuantity++,e.totalPrice+=r.price,e.deliveryCharges=59,e.gst=Math.round(.04*e.totalPrice+Number.EPSILON),e.payablePrice=e.totalPrice+e.deliveryCharges+e.gst},updateQtyInCart(e,t){let{id:r,operation:s}=t.payload,a=e.products[r].quantity;switch(s){case"increment":e.products[r].quantity++;break;case"decrement":a>1?e.products[r].quantity--:delete e.products[r];break;default:console.log("Invalid Operation!")}e.totalQuantity=Object.values(e.products).reduce((e,t)=>e+t.quantity,0),e.totalPrice=Object.values(e.products).reduce((e,t)=>e+t.product.price*t.quantity,0)},setCart(e,t){e.deliveryCharges=t.payload.deliveryCharges||0,e.gst=t.payload.gst||0,e.payablePrice=t.payload.payablePrice||0,e.products=t.payload.products||{},e.totalPrice=t.payload.totalPrice||0,e.totalQuantity=t.payload.totalQuantity||0}}});t.ZP=s.reducer;let{addToCart:a,updateQtyInCart:o,setCart:d}=s.actions}},function(e){e.O(0,[256,741,971,69,744],function(){return e(e.s=8166)}),_N_E=e.O()}]);